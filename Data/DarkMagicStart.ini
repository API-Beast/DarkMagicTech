[Action]
Situation.Require=Start
Situation.Apply=InCell !Start
Player.Apply=Hungry
Text=You wake up, weak, hungry, cold. In front of you a is a door, out of solid iron bars. On the other side is a long hallway, dimly lit by torches. You look down, and see a guard leaning back on the cell door, he is not moving.

[Rule]
Player.Require=Hungry
Player.Imply=Weak

[Rule]
Situation.Require=InCell
Situation.Imply=NearGuard

[Action.LookAtGuard]
PlayerAction=Look at guard;Look at corpse;Look at body;Examine guard;Examine body;Examine corpse
Situation.Require=NearGuard
Player.Apply=KnowsAboutKeys KnowsAboutSword

[Action.LookAtGuard.Result.0]
Player.Require=!HasCellDoorKeys !HasShortSword
Text=The guard lies there, dead, cold. At his belt is a chain of keys and a short sword. A bite mark decorates his shoulder.

[Action.LookAtGuard.Result.1]
Player.Require=HasCellDoorKeys !HasShortSword
Text=The guard lies there, dead, cold. At his belt is a short sword within reach. A bite mark decorates his shoulder.

[Action.LookAtGuard.Result.2]
Player.Require=HasCellDoorKeys HasShortSword
Text=The guard lies there, dead, cold. You have taken everything useful from him. A bite mark decorates his shoulder.

[Action]
PlayerAction=Pick up Keys;Take Keys
Situation.Require=NearGuard
Player.Require=!HasCellDoorKeys KnowsAboutKeys
Player.Apply=HasCellDoorKeys
Text=You croutch to snatch the keyring from the dead body.

[Action]
PlayerAction=Pick up Sword;Take Sword
Situation.Require=NearGuard
Player.Require=!HasShortSword KnowsAboutSword
Player.Apply=HasShortSword
Text=You take the sword of the guard.

[Action.OpenDoor]
Situation.Require=InCell !CellDoorOpen
PlayerAction=Open Door;Push Open Door

[Action.OpenDoor.Result.0]
Situation.Require=CellDoorUnlocked
Situation.Apply=CellDoorOpen
Text=You open the cell door and move through it.

[Action.OpenDoor.Result.1]
Situation.Require=!CellDoorUnlocked
Situation.Apply=CellDoorUnlocked CellDoorOpen
Player.Require=HasCellDoorKeys
Text=You try out different keys until you find one that fits. One "Clack" and the door moves and you leap out into the hallway.

[Action.OpenDoor.Result.2]
Situation.Require=!CellDoorUnlocked
Player.Require=!HasCellDoorKeys
Text=The door doesn't budge a inch. You notice the key hole.

[Action]
Situation.Require=InCell !CellDoorUnlocked
Situation.Apply=CellDoorUnlocked
Player.Require=HasCellDoorKeys
PlayerAction=Unlock Door
Text=You try out different keys until you find one that fits. One "Clack" and the door unlocks.